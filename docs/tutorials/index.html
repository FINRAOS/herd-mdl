



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://finraos.github.io/herd-mdl/tutorials/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-2.5.4">
    
    
      
        <title>Tutorials - Herd-MDL</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.css">
      
    
    
      <script src="../assets/javascripts/modernizr.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
  
    
    
    <body dir="ltr" data-md-color-primary="teal" data-md-color-accent="teal">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <a href="#mdl-tutorials-and-walk-throughs" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a target="_parent" href="https://finraos.github.io/herd-mdl/" title="Herd-MDL" class="md-header-nav__button md-logo">
          
            <img src="../images/herd_logo_large.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Herd-MDL
              </span>
              <span class="md-header-nav__topic">
                Tutorials
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../images/herd_logo_large.png" width="24" height="24">
      
    </span>
    Herd-MDL
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="" title="What is Herd-MDL?" class="md-nav__link">
      What is Herd-MDL?
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="basic-install/" title="Basic Install" class="md-nav__link">
      Basic Install
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="user-guide/" title="User Guide" class="md-nav__link">
      User Guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="dev-guide/" title="Developer guide" class="md-nav__link">
      Developer guide
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="admin-guide/" title="Administration" class="md-nav__link">
      Administration
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="tech-overview/" title="Technical Overview" class="md-nav__link">
      Technical Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="ldap-tree/" title="Users and Groups" class="md-nav__link">
      Users and Groups
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="authorizations-overview/" title="Authorizations and Security" class="md-nav__link">
      Authorizations and Security
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="advanced-install/" title="Advanced Install" class="md-nav__link">
      Advanced Install
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="mdlt/" title="MDLTests (MDLT)" class="md-nav__link">
      MDLTests (MDLT)
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Tutorials
      </label>
    
    <a href="tutorials/" title="Tutorials" class="md-nav__link md-nav__link--active">
      Tutorials
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Contents </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#performing-a-zero-downtime-upgrade-on-herd" title="Performing a zero-downtime upgrade on HERD" class="md-nav__link">
    Performing a zero-downtime upgrade on HERD
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Contents </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#performing-a-zero-downtime-upgrade-on-herd" title="Performing a zero-downtime upgrade on HERD" class="md-nav__link">
    Performing a zero-downtime upgrade on HERD
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="mdl-tutorials-and-walk-throughs">MDL Tutorials and walk-throughs<a class="headerlink" href="#mdl-tutorials-and-walk-throughs" title="Permanent link">&para;</a></h1>
<h2 id="performing-a-zero-downtime-upgrade-on-herd">Performing a zero-downtime upgrade on HERD<a class="headerlink" href="#performing-a-zero-downtime-upgrade-on-herd" title="Permanent link">&para;</a></h2>
<p>MDL supports Performing zero-downtime Deployments of HERD with AWS CodeDeploy in a <a href="https://martinfowler.com/bliki/BlueGreenDeployment.html">Blue/Green</a> fashion.
We chose Blue/Green as our deployment model for upgrades because of the various advantages it offers, viz. </p>
<ul>
<li>Zero-downtime for clients using the system</li>
<li>The ability to perform smoke-tests <em>before</em> traffic is rerouted and a newer version goes live</li>
</ul>
<p>In the following section we'll show you how to perform a zero-downtime upgrade by using the AWS console.</p>
<ol>
<li>
<p>Login to the AWS console and select the <em>Lambda</em> service.</p>
<blockquote>
<p>Note: The rolling upgrade Lambda function is created in the same region that your MDL stack was stood up in.</p>
</blockquote>
</li>
<li>
<p>Find the upgrade Herd lambda function for your stack, it follows the following naming-convention:
 <br> <em>${MDLInstanceName}-Herd-${Environment}-UPGRADE-HERD-LAMBDA-FUNCTION</em> <br><br></p>
<p><img alt="lambda-function-console" src="../images/lambda-function-console.png" /> <br><br></p>
</li>
<li>
<p>Click on the lambda function and proceed to configure a test-event on the top-right corner. We'll use this test-event to invoke the lambda function. <br><br></p>
<p><img alt="configure-lambda-function" src="../images/configure-lambda.png" /> <br><br></p>
</li>
<li>
<p>Click on <em>Configure test events</em> drop-down menu item and create a new test-event for the lambda function.  <br><br></p>
<p><img alt="create-test-event" src="../images/create-test-event.png" /> <br><br>  </p>
</li>
<li>
<p>Select the test-event we created in the previous step and click on the <em>Test</em> button on the top-right corner. <br><br></p>
<p><img alt="invoke-test-event" src="../images/invoke-lambda-function.png" /> <br><br></p>
</li>
<li>
<p>At this point the deployment has been invoked and you could simply stop here and wait for the requested version of HERD to be avaiable (which normally takes about 15 minutes).
   To verify - access HERD's <em>buildInfo</em> page and check if the requested version is available.
   <br><br>
   You could also monitor the deployment progress in the AWS CodeDeploy console; to do that, note down the <code>deployment-id</code> from the lambda execution logs which appear in the previous step after
   you clicked on the <em>Test</em> button and the execution completed. <br><br></p>
<p><img alt="deployment-id" src="../images/deployment-id.png" /> <br><br> </p>
</li>
</ol>
<p>Next, navigate to the CodeDeploy service in the AWS console and select <em>Deployments</em> from the side-bar, then select the deployment-id we noted down previously. </p>
<blockquote>
<p>Note: The deployment's <em>status</em> might show <em>in-progress</em> and it should change to <em>successful</em> afterwards. </p>
</blockquote>
<p><br></p>
<p><img alt="code-deploy-console" src="../images/code-deploy-console.png" /> <br><br> </p>
<p>Wait for the deployment - it is complete when all 4 steps are <em>Successful</em> as shown in the following image <br><br></p>
<p><img alt="code-deploy-success" src="../images/deployment-success.png" /> <br><br>  </p>
<p>Access HERD's <em>buildInfo</em> page and verify that the requested version is now available. </p>
<blockquote>
<p>Note: A link to the buildInfo page can be found in the outputs section of the nested Herd Stack when MDL was deployed. </p>
</blockquote>
<p><img alt="build-info" src="../images/build_info.png" /> <br><br>  </p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="mdlt/" title="MDLTests (MDLT)" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                MDLTests (MDLT)
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
    
      
    
  </body>
</html>